# Pre-commit Hooks

This project uses [pre-commit](https://pre-commit.com/) to ensure code quality and consistency before commits.

## Installed Hooks

### File Quality Checks

- **Trailing Whitespace**: Removes trailing whitespace from files
- **End of File Fixer**: Ensures files end with a newline
- **YAML Syntax Check**: Validates YAML files (excludes Helm templates)
- **JSON Syntax Check**: Validates JSON files
- **Merge Conflict Check**: Detects merge conflict markers
- **Private Key Detection**: Prevents committing private keys

### Documentation

- **Helm Documentation**: Auto-generates Helm chart README files

### Code Quality

- **TypeScript Type Check**: Runs `tsc --noEmit` to check for type errors
- **ESLint with Auto-fix**: Lints and auto-fixes TypeScript/JavaScript files
- **Prettier Format Check**: Ensures code is formatted consistently

## Installation

Pre-commit hooks are automatically installed when you run:

```bash
npm install
```

If you need to manually install or reinstall:

```bash
pip install pre-commit
pre-commit install
```

## Usage

Hooks run automatically on `git commit`. To run hooks manually on all files:

```bash
pre-commit run --all-files
```

To run a specific hook:

```bash
pre-commit run <hook-id> --all-files
```

## Skipping Hooks

If you need to skip hooks (not recommended):

```bash
git commit --no-verify
```

## Performance

All hooks are configured to run efficiently:

- TypeScript type checking excludes test files
- ESLint runs with auto-fix enabled
- Hooks use caching where possible

Expected total runtime: < 30 seconds for typical commits

## Troubleshooting

### Hook Fails

1. Review the error message
2. Fix the issues in your code
3. Stage the fixed files: `git add <files>`
4. Try committing again

### Update Hooks

To update to the latest hook versions:

```bash
pre-commit autoupdate
```

### Clear Cache

If hooks behave unexpectedly:

```bash
pre-commit clean
pre-commit install --install-hooks
```
